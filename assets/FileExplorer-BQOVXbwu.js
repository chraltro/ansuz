import{R as e,j as s,M as t,a as r,r as a}from"./markdown-vendor-VnR7y5Ko.js";import{S as n}from"./index-BqnNp4TT.js";import"./react-vendor-RsqJS7wA.js";import"./syntax-highlighter-Cp37pCpN.js";const l=e.memo(({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}));l.displayName="FileIcon";const i=e.memo(({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}));i.displayName="FolderIcon";const o=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),c=({node:e,selectedFile:t,onSelectFile:r,processingStatus:d,fileSummaries:m,summaryStatus:x,depth:h=0})=>{const[u,g]=a.useState(h<2),p=e.children&&e.children.length>0,j=()=>{p?g(!u):r(e)};if(p){const a=[...e.children].sort((e,s)=>{const t=e.children.length>0,r=s.children.length>0;return t&&!r?-1:!t&&r?1:e.name.localeCompare(s.name)});return s.jsxs("div",{style:{paddingLeft:h>0?"0.5rem":"0"},children:[s.jsxs("div",{onClick:j,className:"flex items-center space-x-2 p-1.5 rounded-md cursor-pointer hover:bg-gray-700/50",children:[s.jsx(i,{className:"w-5 h-5 text-blue-accent flex-shrink-0"}),s.jsx("span",{className:"font-medium text-blue-light truncate",children:e.name})]}),u&&s.jsx("div",{className:"mt-1 border-l border-gray-700 ml-2.5",children:a.map(e=>s.jsx(c,{node:e,selectedFile:t,onSelectFile:r,processingStatus:d,fileSummaries:m,summaryStatus:x,depth:h+1},e.path))})]})}const y=t?.path===e.path,f=d.get(e.path)??"idle",v=x.get(e.path),b=m.get(e.path);return s.jsx("div",{style:{paddingLeft:h>0?"0.5rem":"0"},children:s.jsxs("div",{onClick:j,className:"group relative flex items-center justify-between space-x-2 p-1.5 rounded-md cursor-pointer hover:bg-gray-700/50 transition-colors duration-200 "+(y?"bg-blue-accent/20 text-blue-light":"text-gray-500"),children:[s.jsxs("div",{className:"flex items-center space-x-2 overflow-hidden",children:[s.jsx(l,{className:"w-5 h-5 text-cyan-accent flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.name})]}),s.jsxs("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center",children:["processing"===f&&s.jsx(n,{className:"w-4 h-4 text-blue-accent"}),"done"===f&&s.jsx(o,{className:"w-4 h-4 text-green-accent"}),"idle"===f&&"summarizing"===v&&s.jsx(n,{className:"w-4 h-4 text-orange-accent"})]}),"done"===v&&b&&s.jsx("div",{className:"absolute left-6 top-full mt-2 w-72 p-3 bg-gray-900 border border-gray-700 rounded-md shadow-lg text-sm invisible group-hover:visible z-50 transition-opacity duration-200 opacity-0 group-hover:opacity-100",children:s.jsx("p",{className:"text-blue-light/90 whitespace-pre-wrap",children:b})})]})})},d=e=>{const{node:a,selectedFile:l,onSelectFile:i,onProcessAll:o,processingStatus:d,isProcessingQueueActive:m,processingQueueLength:x,remainingFilesToProcess:h,fileSummaries:u,summaryStatus:g,projectSummary:p,isProjectSummaryLoading:j,onLogout:y}=e;return s.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[s.jsxs("div",{className:"p-3 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-lg font-bold text-blue-light",children:"File Explorer"}),y&&s.jsx("button",{onClick:y,className:"bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white px-3 py-1.5 rounded-md transition-colors duration-200 text-xs font-medium",children:"Logout"})]}),s.jsxs("div",{className:"mt-2 mb-4 p-2 bg-gray-900/50 rounded-md min-h-[6rem]",children:[s.jsx("h3",{className:"text-sm font-bold text-cyan-accent mb-1",children:"Project Summary"}),j&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(n,{className:"w-4 h-4"}),s.jsx("span",{children:"Generating..."})]}),!j&&p&&s.jsx("div",{className:"prose prose-invert max-w-none prose-sm prose-p:text-blue-light/90 prose-p:my-2",children:s.jsx(t,{remarkPlugins:[r],children:p})}),!j&&!p&&s.jsx("p",{className:"text-sm text-gray-600",children:"Upload files to generate a summary."})]}),s.jsxs("button",{onClick:o,disabled:0===h,className:"w-full font-bold py-2 px-4 rounded-lg transition-all duration-300 text-sm flex items-center justify-center space-x-2 "+(0===h?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-green-accent hover:bg-opacity-80 text-gray-900"),children:[m?s.jsx(n,{className:"w-4 h-4"}):null,s.jsx("span",{children:(()=>{if(0===h)return"All Files Analyzed";if(x>0)return`Processing... (${h} left)`;const e=Array.from(d.values()).some(e=>"processing"===e);return e&&h>1?`Queue ${h} Remaining Files`:1===h?e?"Queue Last File":"Analyze Last File":`Analyze ${h} Files`})()})]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto p-2",children:s.jsx(c,{node:a,selectedFile:l,onSelectFile:i,processingStatus:d,fileSummaries:u,summaryStatus:g})})]})};export{d as default};
